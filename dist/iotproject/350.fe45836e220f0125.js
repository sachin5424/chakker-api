"use strict";(self.webpackChunkIOTProject=self.webpackChunkIOTProject||[]).push([[350],{4350:(W,p,i)=>{i.r(p),i.d(p,{ZoneSetupModule:()=>G});var c=i(9808),m=i(1083),e=i(5e3),f=i(679),d=i(4999),S=i(5226),l=i.n(S),h=i(1215),Z=i(7423),T=i(5245);function g(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," S No. "),e.qZA())}function C(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.index;e.xp6(1),e.hij(" ",n+1," ")}}function b(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," UID "),e.qZA())}function x(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.$implicit,a=o.index;e.xp6(1),e.hij(" ",n._id[3]+a," ")}}function D(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Zone Name "),e.qZA())}function v(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",n.zoneName," ")}}function N(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Latitude "),e.qZA())}function A(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",n.location.coordinates[0]?n.location.coordinates[0]:"-----"," ")}}function U(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Longitude "),e.qZA())}function y(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",n.location.coordinates[1]?n.location.coordinates[1]:"-----"," ")}}function w(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Status "),e.qZA())}const Y=function(t){return{color:t}};function z(t,o){if(1&t&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("ngStyle",e.VKq(2,Y,1==n.status?"green":"red")),e.xp6(1),e.hij(" ",1==n.status?"Active":"Deactivated"," ")}}function B(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," server Time "),e.qZA())}function I(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,n.serverTime,"dd-mm-yyyy")," ")}}function Q(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Edit "),e.qZA())}function J(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"td",16)(1,"button",18),e.NdJ("click",function(){const r=e.CHM(n).$implicit;return e.oxw().updateZoneSetUp(r)}),e.TgZ(2,"mat-icon",19),e._uU(3," edit "),e.qZA()()()}}function q(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Delete "),e.qZA())}function E(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"td",16)(1,"button",20),e.NdJ("click",function(){const r=e.CHM(n).$implicit;return e.oxw().ZoneSetupDelete(r)}),e.TgZ(2,"mat-icon",21),e._uU(3," delete "),e.qZA()()()}}function j(t,o){1&t&&e._UZ(0,"tr",22)}function k(t,o){1&t&&e._UZ(0,"tr",23),2&t&&e.Q6J("@fadeOut",void 0)}let M=(()=>{class t{constructor(n){this._htp=n,this.displayedColumns=["position","name","weight","symbol","longitude","status","stime","action","delete"],console.log(this.adddata,"jhgfds")}onClose(n){console.log(n,"table")}ngOnInit(){this.ZoneSetupList(),this._htp.addDataShared.subscribe(n=>{console.log(n,"??????????"),this.dataSource=[...this.dataSource,n.data]}),this._htp.addDataShared.subscribe(n=>{console.log(n,"??update value");const a=this.dataSource.findIndex(u=>u._id==n._id);console.log(a,"????"),this.dataSource[a].zoneName=n.zoneName})}onRowClick(n){this.dataSource=new d.by(this.dataSource.data.filter(a=>a.id!==n.id))}ZoneSetupList(){this._htp.ZoneSetupList().subscribe({next:n=>{this.dataSource=n.data,console.log(this.dataSource,"data")}})}ZoneSetupDelete(n){l().fire({text:`Do you want ${n.zoneName} to be deleted.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No"}).then(a=>{a.value?this._htp.ZoneSetupDelete(n._id).subscribe({next:u=>{this.dataSource=this.dataSource.filter(r=>r._id!=n._id)}}):a.dismiss===l().DismissReason.cancel&&l().fire("Cancelled","","warning")})}updateZoneSetUp(n){this._htp.updateDataShared.next(n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-zone-setup-table"]],inputs:{adddata:"adddata"},decls:31,vars:4,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","weight"],["matColumnDef","symbol"],["matColumnDef","longitude"],["matColumnDef","status"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","stime"],["matColumnDef","action"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"ngStyle"],["mat-mini-fab","",2,"background","green",3,"click"],[1,"mat-18",2,"color","white"],["color","warn","mat-mini-fab","",3,"click"],[1,"mat-18"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(e.TgZ(0,"table",0),e._uU(1),e.ynx(2,1),e.YNc(3,g,2,0,"th",2),e.YNc(4,C,2,1,"td",3),e.BQk(),e.ynx(5,4),e.YNc(6,b,2,0,"th",2),e.YNc(7,x,2,1,"td",3),e.BQk(),e.ynx(8,5),e.YNc(9,D,2,0,"th",2),e.YNc(10,v,2,1,"td",3),e.BQk(),e.ynx(11,6),e.YNc(12,N,2,0,"th",2),e.YNc(13,A,2,1,"td",3),e.BQk(),e.ynx(14,7),e.YNc(15,U,2,0,"th",2),e.YNc(16,y,2,1,"td",3),e.BQk(),e.ynx(17,8),e.YNc(18,w,2,0,"th",2),e.YNc(19,z,2,4,"td",9),e.BQk(),e.ynx(20,10),e.YNc(21,B,2,0,"th",2),e.YNc(22,I,3,4,"td",3),e.BQk(),e.ynx(23,11),e.YNc(24,Q,2,0,"th",2),e.YNc(25,J,4,0,"td",3),e.BQk(),e.ynx(26,12),e.YNc(27,q,2,0,"th",2),e.YNc(28,E,4,0,"td",3),e.BQk(),e.YNc(29,j,1,0,"tr",13),e.YNc(30,k,1,1,"tr",14),e.qZA()),2&n&&(e.Q6J("dataSource",a.dataSource),e.xp6(1),e.hij(" ",a.adddata," "),e.xp6(28),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns))},directives:[d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,c.PC,Z.lW,T.Hw,d.as,d.XQ,d.nj,d.Gk],pipes:[c.uU],styles:["table[_ngcontent-%COMP%]{width:100%}"],data:{animation:[f.U6,f.i9]}}),t})();var s=i(3075),_=i(7322),O=i(7531),R=i(773);function F(t,o){1&t&&e._UZ(0,"mat-spinner",15)}function L(t,o){if(1&t&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",0==n.check_update?" Update Sub Zone ":" Add Sub Zone "," ")}}let $=(()=>{class t{constructor(n){this._ZoneSetupService=n,this.check_update=!1,this.upDateData={},this.addData=new e.vpe,this.formAddData=this.addData,this.spinner=!1,this.formError={},this.createForm()}ngOnInit(){this._ZoneSetupService.updateDataShared.subscribe(n=>{this.upDateData=n,console.log(n,"setp zone"),this.latitdude=this.upDateData.location.coordinates[0],this.longitude=this.upDateData.location.coordinates[1],this.check_update=!0,this.createForm()})}createForm(){this.form=new s.cw({status:new s.NI(!1),zoneName:new s.NI(this.upDateData.zoneName?this.upDateData.zoneName:null,[s.kI.required]),latitude:new s.NI(this.latitdude?this.latitdude:null,[s.kI.required]),longitude:new s.NI(this.longitude?this.longitude:null,[s.kI.required])})}onSubmit(){this.spinner=!0,0==this.check_update?this.newZoneSetUp():this.subZoneUpdate()}newZoneSetUp(){l().fire({title:"Are you sure?",text:"This process is irreversible.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, let me think"}).then(n=>{n.value?(l().fire("Saved!","Zone is successfully saved.","success"),this.form.valid&&this._ZoneSetupService.ZoneSetupAdd(this.form.value).subscribe({next:a=>{this.addData.emit(a),console.log(a),this.spinner=!1,this._ZoneSetupService.addDataShared.next(a)},error:a=>{this.spinner=!1,console.log(a,"error>>>>>>>>>"),a.error.errors.map(r=>{this.formError[r.param]=r.msg}),this.formError.zoneName&&l().fire("Cancelled",this.formError.zoneName,"error")}})):n.dismiss===l().DismissReason.cancel&&l().fire("Cancelled","zone still in our database.)","error")})}subZoneUpdate(){this._ZoneSetupService.addDataShared.unsubscribe(),this.spinner=!0,l().fire({title:"Are you sure?",text:"This process is irreversible.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, let me think"}).then(n=>{n.value?this.form.valid&&this._ZoneSetupService.ZoneSetupUpdate(this.upDateData._id,this.form.value).subscribe({next:a=>{l().fire("Updated!","Zone updated successfully.","success"),this.spinner=!1,this._ZoneSetupService.addDataShared.next(a)},error:a=>{this.spinner=!1,console.log(a,"error>>>>>>>>>"),a.error.errors.map(r=>{this.formError[r.param]=r.msg}),this.formError.zoneName&&l().fire("Cancelled",this.formError.zoneName,"error")}}):n.dismiss===l().DismissReason.cancel&&(this.spinner=!1,l().fire("Cancelled","Zone still in our database.)","error"))})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-zone-setup-add-edit"]],outputs:{addData:"addData"},decls:25,vars:5,consts:[[1,"float-right"],[3,"formGroup","ngSubmit"],[1,"container"],[1,"text-center"],[1,"row","mt-3"],[1,"col-md-12","mt-"],["appearance","outline",1,"example-full-width"],["formControlName","zoneName","matInput","","placeholder","Name"],[1,"col-md-6"],["formControlName","latitude","matInput","","placeholder","Latitude"],["formControlName","longitude","matInput","","placeholder","Longitude"],[1,"col-ma-12"],["type","submit","mat-raised-button","",1,"w-100","t",3,"disabled"],["diameter","40","style","margin-left:150px",4,"ngIf"],["class","",4,"ngIf"],["diameter","40",2,"margin-left","150px"],[1,""]],template:function(n,a){1&n&&(e._UZ(0,"div",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(2,"div",2)(3,"h1",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Sub Zone Name"),e.qZA(),e._UZ(10,"input",7),e.qZA()(),e.TgZ(11,"div",8)(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Latitude"),e.qZA(),e._UZ(15,"input",9),e.qZA()(),e.TgZ(16,"div",8)(17,"mat-form-field",6)(18,"mat-label"),e._uU(19,"Longitude"),e.qZA(),e._UZ(20,"input",10),e.qZA()(),e.TgZ(21,"div",11)(22,"button",12),e.YNc(23,F,1,0,"mat-spinner",13),e.YNc(24,L,2,1,"div",14),e.qZA()()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(3),e.hij(" ",1==a.check_update?" Update Sub Zone ":" Add Sub Zone "," "),e.xp6(18),e.Q6J("disabled",a.form.invalid),e.xp6(1),e.Q6J("ngIf",a.spinner),e.xp6(1),e.Q6J("ngIf",!a.spinner))},directives:[s._Y,s.JL,s.sg,_.KE,_.hX,s.Fj,O.Nt,s.JJ,s.u,Z.lW,c.O5,R.Ou],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),t})();const P=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}onClose(n){this.sendData=n,console.log(this.sendData)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-zone-setup-dashboard"]],decls:6,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-8"],[3,"adddata"],[1,"col-md-4","p-3"],[3,"addData"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-zone-setup-table",3),e.qZA(),e.TgZ(4,"div",4)(5,"app-zone-setup-add-edit",5),e.NdJ("addData",function(r){return a.onClose(r)}),e.qZA()()()()),2&n&&(e.xp6(3),e.Q6J("adddata",a.sendData))},directives:[M,$],styles:[""]}),t})()}];let H=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),t})();var X=i(9364);let G=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,H,X.h]]}),t})()}}]);